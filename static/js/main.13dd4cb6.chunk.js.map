{"version":3,"sources":["component/Item.js","component/Basket.js","App.js","index.js"],"names":["items","id","product","price","Item","useState","counters","setCounters","setBreads","total","setTotal","subTotal","setSubTotal","useEffect","reduce","counter","ind","arr","calculateDiscount","setCount","index","newCounter","newCounters","Object","assign","originalPrice","counterArr","Math","floor","setOfSoups","breads","breadPrice","listItem","map","item","className","onClick","decrementPrice","trunc","value","prev","discount","incrementPrice","toFixed","Basket","App","ReactDOM","render","document","getElementById"],"mappings":"wOAGMA,EAAQ,CACZ,CAAEC,GAAI,EAAGC,QAAS,SAAUC,MAAO,GACnC,CAAEF,GAAI,EAAGC,QAAS,QAASC,MAAO,IAClC,CAAEF,GAAI,EAAGC,QAAS,OAAQC,MAAO,KACjC,CAAEF,GAAI,EAAGC,QAAS,OAAQC,MAAO,MA4HpBC,EAzHF,WACX,IADiB,EAGeC,mBAAS,CAAC,EAAG,EAAG,EAAG,IAHlC,mBAGVC,EAHU,KAGAC,EAHA,OAMWF,mBAAS,IANpB,mBAMFG,GANE,aAQSH,mBAAS,GARlB,mBAQVI,EARU,KAQHC,EARG,OASeL,mBAAS,GATxB,mBASVM,EATU,KASAC,EATA,KAWjBC,qBAAU,WAAO,IAAD,EACcP,EAASQ,QACnC,WAAsBC,EAASC,EAAKC,GAAS,IAA1CR,EAAyC,EAAzCA,MAAOE,EAAkC,EAAlCA,SACFR,EAAQH,EAAMgB,GAAKb,MAKzB,OAJAQ,GAAYR,EAAQY,EAIb,CAAEN,MAFTA,GAASS,EAAkBf,EAAOa,EAAKC,EAAKF,GAE5BJ,cAElB,CACEF,MAAO,EACPE,SAAU,IAXNF,EADM,EACNA,MAAOE,EADD,EACCA,SAcfD,EAASD,GACTG,EAAYD,KAEX,CAACL,IAEJ,IAAMa,EAAW,SAACC,EAAOC,GACvB,IAAMC,EAAcC,OAAOC,OAAO,GAAIlB,GACtCgB,EAAYF,GAASC,EACrBd,EAAYe,IAGRJ,EAAoB,SAACO,EAAeT,EAAKU,EAAYX,GAKzD,GAAoB,IAARC,EAEV,OADSS,EAA6B,GAAbA,GACTV,EAElB,GAAY,IAARC,GACGW,KAAKC,MAAMF,EAAW,GAAK,GAAG,EAAG,CAKpC,IAJA,IAAIG,EAAcF,KAAKC,MAAMF,EAAW,GAAK,GACzCI,EAASJ,EAAW,GACpBK,EAAa,EAEXF,GAAcC,GAClBC,GAAcN,EAA4B,GAAbA,EAC7BI,GAAY,EACZC,GAAQ,EAEV,KAAMA,GACJC,GAAcN,EACdK,GAAS,EAGX,OAAOC,EAIX,OAAON,EAAgBV,GAmBnBiB,EAAWhC,EAAMiC,KAAI,SAACC,EAAMd,GAAP,OACzB,sBAAKe,UAAU,aAAf,UACE,uBAAOA,UAAU,eAAjB,SAAiCD,EAAKhC,UACtC,sBAAKiC,UAAU,WAAf,UACE,wBAAQC,QAAS,kBAXA,SAAChB,GACtBD,EACEC,EACoB,IAApBd,EAASc,GAAed,EAASc,GAASd,EAASc,GAAS,GAQnCiB,CAAejB,EAAOO,KAAKW,MAAMJ,EAAK/B,SAA7D,eAGA,uBAAOgC,UAAU,eAAjB,SAAiC7B,EAASc,KAC1C,wBAAQgB,QAAS,kBAxBA,SAAChB,EAAOmB,EAAOL,GACpCf,EAASC,EAAOd,EAASc,GAAS,GAErB,UAATc,GACF1B,GAAU,SAACgC,GAAD,4BAAcA,GAAd,CAAoB,CAACN,KAAK,QAASO,UAAS,QAoB7BC,CAAetB,EAAOc,EAAK/B,MAAO+B,EAAKhC,UAA9D,eAGA,oBAAIiC,UAAU,aAAd,8BAAuCD,EAAK/B,cAVf+B,EAAKhC,YAexC,OACE,sBAAKiC,UAAU,OAAf,UACE,sBAAKA,UAAU,sBAAf,UACE,+CACCH,KAEH,sBAAKG,UAAU,8BAAf,UACE,+CACA,+CACe,+BAAOxB,EAASgC,QAAQ,QAGvC,yCACS,+BAAOlC,EAAMkC,QAAQ,eCjHvBC,EARA,WACb,OACE,qBAAKT,UAAU,iBAAf,SACE,cAAC,EAAD,OCKSU,MARf,WACE,OACE,qBAAKV,UAAU,qBAAf,SACE,cAAC,EAAD,OCDNW,IAASC,OAAO,cAAC,EAAD,IAASC,SAASC,eAAe,W","file":"static/js/main.13dd4cb6.chunk.js","sourcesContent":["import React, { useEffect } from \"react\";\nimport { useState } from \"react\";\n\nconst items = [\n  { id: 0, product: \"Apples\", price: 1.0 },\n  { id: 1, product: \"Bread\", price: 0.8 },\n  { id: 2, product: \"Milk\", price: 1.3 },\n  { id: 3, product: \"Soup\", price: 0.65 },\n];\n\nconst Item = () => {\n  let week = true;\n\n  const [counters, setCounters] = useState([0, 0, 0, 0]);\n\n  //get list of all breads\n  const [breads, setBreads] = useState([]);\n\n  const [total, setTotal] = useState(0.0);\n  const [subTotal, setSubTotal] = useState(0.0);\n\n  useEffect(() => {\n    const { total, subTotal } = counters.reduce(\n      ({ total, subTotal }, counter, ind, arr) => {\n        const price = items[ind].price;\n        subTotal += price * counter;\n\n        total += calculateDiscount(price, ind, arr, counter);\n        \n        return { total, subTotal };\n      },\n      {\n        total: 0,\n        subTotal: 0,\n      }\n    );\n    setTotal(total);\n    setSubTotal(subTotal);\n    //console.log(total, subTotal);\n  }, [counters]);\n\n  const setCount = (index, newCounter) => {\n    const newCounters = Object.assign([], counters);\n    newCounters[index] = newCounter;\n    setCounters(newCounters);\n  };\n\n  const calculateDiscount = (originalPrice, ind, counterArr, counter) => {\n    const APPLE_PERCENT_0FF = 10;\n    const BREAD_PERCENT_0FF = 50;\n    const CENT = 100;\n    let result = 0;\n    if (week && ind === 0) {\n      result = originalPrice - originalPrice * (APPLE_PERCENT_0FF / CENT);\n      return result * counter;\n    }\n    if (ind === 1) {\n      if ( Math.floor(counterArr[3] / 2)>0) {\n        let setOfSoups =  Math.floor(counterArr[3] / 2);\n        let breads = counterArr[1];\n        let breadPrice = 0;\n\n        while(setOfSoups && breads){\n          breadPrice += originalPrice- originalPrice * (BREAD_PERCENT_0FF / CENT);\n          setOfSoups-=1;\n          breads-=1;\n        }\n        while(breads){\n          breadPrice += originalPrice;\n          breads -=1;\n        }\n\n        return breadPrice;\n        \n      }\n    }\n    return originalPrice * counter;\n  };\n\n  const incrementPrice = (index, value, item) => {\n    setCount(index, counters[index] + 1);\n    //add breads\n    if (item === 'Bread') {\n      setBreads((prev) => [...prev, {item:'Bread', discount:false}])\n    }\n   \n  };\n\n  const decrementPrice = (index) => {\n    setCount(\n      index,\n      counters[index] === 0 ? counters[index] : counters[index] - 1\n    );\n  };\n\n  const listItem = items.map((item, index) => (\n    <div className=\"list-items\" key={item.product}>\n      <label className=\"product-name\">{item.product}</label>\n      <div className=\"controls\">\n        <button onClick={() => decrementPrice(index, Math.trunc(item.price))}>\n          -\n        </button>\n        <label className=\"displayValue\">{counters[index]}</label>\n        <button onClick={() => incrementPrice(index, item.price, item.product)}>\n          +\n        </button>\n        <h4 className=\"unit-price\">{`Unit / Â£${item.price}`}</h4>\n      </div>\n    </div>\n  ));\n\n  return (\n    <div className=\"cart\">\n      <div className=\"list-item-container\">\n        <h3>Shopping Cart</h3>\n        {listItem}\n      </div>\n      <div className=\"list-item-details-container\">\n        <h4>Price Details</h4>\n        <h5>\n          Subtotal GBP <span>{subTotal.toFixed(2)}</span>\n        </h5>\n\n        <h5>\n          TOTAL: <span>{total.toFixed(2)}</span>\n        </h5>\n      </div>\n    </div>\n  );\n};\n\nexport default Item;\n","import React from \"react\";\nimport Item from \"./Item\";\n\nconst Basket = () => {\n  return (\n    <div className=\"item-container\">\n      <Item />\n    </div>\n  );\n};\n\nexport default Basket;\n","import \"./App.css\";\nimport Basket from \"./component/Basket\";\n\nfunction App() {\n  return (\n    <div className=\"main-container App\">\n      <Basket />\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}